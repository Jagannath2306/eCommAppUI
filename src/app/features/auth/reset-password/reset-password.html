<div class="bg-image pt-2 pb-2">
  <div class="row">
    <div class="col-6 img-conatiner">
      <img src="./forgot_password.png" alt="" class="forgot-password-img" />
    </div>
    <div class="col-6">
      <div class="login-card animate__animated animate__fadeIn">
        <div class="text-center">
          <!-- <i class="bi bi-shield-lock-fill text-primary" style="font-size: 4rem"></i>-->
          <img src="./brand_logo.png" alt="" class="brand_logo" />
          <h2 class="fw-bold mt-2 text-primary">Reset Password</h2>
        </div>

        <form autocomplete="off" [formGroup]="resetPasswordForm" (ngSubmit)="onSubmit()">
          <div class="row">
            <div class="col-12 col-md-12 col-lg-12">
              <div class="mb-3">
                <label for="otp" class="form-label">OTP <span class="text-danger">*</span></label>
                <div class="input-group">
                  <input
                    type="text"
                    class="form-control"
                    id="otp"
                    placeholder="123456"
                    required
                    formControlName="otp"
                    [ngClass]="{ 'is-invalid': (f.otp.touched || submitted) && f.otp.invalid }"
                  />
                  @if ((f.otp.touched || submitted) && f.otp.errors) {
                  <div class="invalid-feedback d-block">
                    @if (f.otp.errors['required']) { OTP is required } @else if
                    (f.otp.errors['minlength']) { OTP must be at least 6 characters } @else if
                    (f.otp.errors['pattern']) { Invalid OTP format (numbers only) }
                  </div>
                  }
                </div>
              </div>
            </div>
            <div class="col-12 col-md-12 col-lg-12">
              <div class="mb-3">
                <label for="newPassword" class="form-label"
                  >New Password <span class="text-danger">*</span></label
                >
                <div class="input-group">
                  <input
                    type="password"
                    class="form-control"
                    id="newPassword"
                    placeholder="Abc@9090"
                    required
                    formControlName="newPassword"
                    [ngClass]="{ 'is-invalid': (f.newPassword.touched || submitted) && f.newPassword.invalid }"
                  />
                  @if ((f.newPassword.touched || submitted) && f.newPassword.errors) {
                  <div class="invalid-feedback d-block">
                    @if (f.newPassword.errors['required']) { Password is required } @else if
                    (f.newPassword.errors['pattern']) { Password must include 1 uppercase, 1 number, 1 special char and minium 8 chars }
                  </div>
                  }
                </div>
              </div>
            </div>
            <div class="col-12 col-md-12 col-lg-12">
              <div class="mb-3">
                <label for="confirmPassword" class="form-label"
                  >Confirm Password <span class="text-danger">*</span></label
                >
                <div class="input-group">
                  <input
                    type="password"
                    class="form-control"
                    id="confirmPassword"
                    placeholder="Abc@9090"
                    required
                    formControlName="confirmPassword"
                    [ngClass]="{ 'is-invalid': (f.confirmPassword.touched || submitted) && f.confirmPassword.invalid }"
                  />
                  @if ((f.confirmPassword.touched || submitted) && f.confirmPassword.errors) {
                  <div class="invalid-feedback d-block">
                    @if (f.confirmPassword.errors['required']) { Confirm Password is required }
                    @else if (f.confirmPassword.errors['pattern']) { Password must include 1 uppercase, 1 number, 1 special char and minium 8 chars  }
                    @else if (f.confirmPassword.errors['mustMatch']) { Passwords do not match }
                  </div>
                  }
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12">
              @if (!resendDisabled()) {
              <button class="btn btn-link p-0 mb-3 w-auto" (click)="resendOtp()">Resend OTP</button>
              } @else {
              <div class="text-muted mb-3">You can resend OTP in {{ countdown() }} seconds</div>
              }
            </div>
          </div>
          <button type="submit" class="btn btn-primary w-100 mb-3">Reset Password</button>
        </form>
      </div>
    </div>
  </div>
</div>
