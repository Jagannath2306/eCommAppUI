<app-modal title="Product Variant Info" confirmText="Edit Variant" mode="view">
  @if (variant(); as v) {
    <div class="container-fluid py-2">
      <div class="row g-4">
        <div class="col-md-5">
          <div class="card border-0 p-2 shadow-sm bg-light">
            <div class="main-img-box text-center">
              <img
                [src]="baseURL + v.imagePath"
                class="img-fluid rounded"
                style="max-height: 300px; width: 100%; object-fit: cover"
                alt="Product Image"
              />
            </div>
          </div>
          <div class="mt-3 text-center">
            <h2 class="fw-bold text-success m-0">&#x20B9; {{ v.price }}</h2>
            @if (v.productPrice > 0) {
              <span class="badge bg-danger text-white">
                {{
                  ((v.productPrice - v.productSalePrice) / v.productPrice) * 100 | number: '1.0-0'
                }}% OFF
              </span>
            }
          </div>
        </div>

        <div class="col-md-7">
          <div class="d-flex justify-content-between align-items-start">
            <div>
              <h3 class="fw-bold text-primary mb-0">{{ v.productName }}</h3>
              <small class="text-muted text-uppercase fw-bold"
                >SKU ID: {{ v.sku | uppercase }}</small
              >
            </div>
            <span class="badge px-3 py-2" [ngClass]="v.isActive ? 'bg-success' : 'bg-danger'">
              {{ v.isActive ? 'Active' : 'Inactive' }}
            </span>
          </div>

          <div class="row mt-4 g-2">
            <div class="col-12">
              <div class="p-2 rounded bg-light border d-flex align-items-center gap-4">
                <span
                  [style.background-color]="v.colorValue"
                  [title]="v.colorName"
                  class="d-inline-block  border"
                  style="width: 100px; height: 40px;"
                ></span>
                <div>
                  <label
                    class="fw-bold x-small text-uppercase text-muted d-block"
                    style="font-size: 0.7rem"
                    >Color</label
                  >
                  <span class="fw-bold small text-capitalize">{{ v.colorName }}</span>
                </div>
              </div>
            </div>
            <hr class="mt-4" />
            <div class="col-6">
              <div class="p-2 rounded bg-light border d-flex align-items-center gap-4">
                <i class="bi bi-rulers text-primary"></i>
                <div>
                  <label
                    class="fw-bold x-small text-uppercase text-muted d-block"
                    style="font-size: 0.7rem"
                    >Size</label
                  >
                  <span class="fw-bold small">{{ v.size }}</span>
                </div>
              </div>
            </div>
            <div class="col-6">
              <div class="p-2 rounded bg-light border d-flex align-items-center gap-4">
                <i class="bi bi-box-seam me-1 text-primary"></i>
                <div>
                  <label
                    class="fw-bold x-small text-uppercase text-muted d-block"
                    style="font-size: 0.7rem"
                    >In Stock</label
                  >
                  <span class="fw-bold small">{{ v.stock }}</span>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6 border-end mt-4">
              <label class="fw-bold small text-uppercase text-muted d-block">Created On</label>
              <p class="mb-0 small text-secondary">{{ v.createdOn | date: 'mediumDate' }}</p>
            </div>
            <div class="col-6 ps-3 mt-4">
              <label class="fw-bold small text-uppercase text-muted d-block">Last Update</label>
              <p class="mb-0 small text-secondary">{{ v.updatedOn | date: 'mediumDate' }}</p>
            </div>
          </div>
          <div class="row">
            <div class="col-12">
               <p class="text-primary mt-2 fw-bold">Status : {{ v.statusName }}</p>
            <p class="text-muted mt-2 border-start border-4 ps-3 py-1 m-0 bg-light rounded-end">
             {{ v.statusDesc || 'No description provided for this status.' }}
          </p>
            </div>
          </div>
        </div>

        <hr class="my-4" />
        <div class="row">
            <div class="col-12 mb-2">
                 <p class="mb-0 fw-bold">Title:</p>
                 <p class="mb-0 small">{{ v.productTitle }}</p>
            </div>
            <div class="col-12  mb-2">
                 <p class="mb-0 fw-bold">Short Description:</p>
                 <p class="mb-0 small">{{ v.productShortDetails }}</p>
            </div>
            <div class="col-12  mb-2">
                 <p class="mb-0 fw-bold">Description:</p>
                 <p class="mb-0 small">{{ v.productDetails }}</p>
            </div>
        </div>
        <hr>

        <div class="col-12 mt-0">
          <div class="modal-footer justify-content-between bg-light py-2 px-3 border rounded">
            <div class="small">
              <i class="bi bi-person-circle me-1"></i>
              <strong class="text-dark">Created By: {{ v.createdBy }}</strong>
            </div>
            <div class="small text-success fw-bold">
              <i class="bi bi-box-seam me-1"></i><b>{{ v.stock }}</b> In Stock
            </div>
          </div>
        </div>
      </div>
    </div>
  } @else {
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status"></div>
      <p class="mt-2 text-muted">Loading variant details...</p>
    </div>
  }
</app-modal>
