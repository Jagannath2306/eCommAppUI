<app-modal
  title="Create User"
  confirmText="Create User"
  mode="create"
  [disableConfirm]="registerForm.invalid"
  (confirm)="onSubmit()"
>
  <form autocomplete="off" [formGroup]="registerForm" (ngSubmit)="onSubmit()">
    <div class="row">
      <div class="col-12 col-lg-6 col-md-6">
        <div class="mb-4">
          <label for="types" class="form-label text-primary"
            >Select User Type <span class="text-danger">*</span></label
          >
          <div class="input-group">
            <select
              class="form-select custom-select text-uppercase"
              formControlName="userTypeId"
              id="types"
             [ngClass]="{
                'is-invalid': (f.userTypeId.touched || submitted) && f.userTypeId.invalid
              }"
            >
              <option value="" disabled selected>Select User Type</option>
              @for (type of userTypes(); track type._id) {
              <option [value]="type._id" class="text-uppercase">{{ type.name }}</option>
              } @empty {
              <option disabled>No Types found</option>
              }
            </select>
             @if ((f.userTypeId.touched || submitted) && f.userTypeId.errors) {
            <div class="invalid-feedback d-block">
              @if (f.userTypeId.errors['required']) { First Name is required }
            </div>
            }
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12 col-lg-6 col-md-6">
        <div class="mb-2">
          <label for="firstName" class="form-label text-primary"
            >First Name <span class="text-danger">*</span></label
          >
          <div class="input-group">
            <input
              type="text"
              class="form-control"
              id="firstName"
              required
              formControlName="firstName"
              [ngClass]="{
                'is-invalid': (f.firstName.touched || submitted) && f.firstName.invalid
              }"
            />
            @if ((f.firstName.touched || submitted) && f.firstName.errors) {
            <div class="invalid-feedback d-block">
              @if (f.firstName.errors['required']) { First Name is required } @else if
              (f.firstName.errors['minlength']) { First Name must be at least 2 characters } @else if (f.firstName.errors['maxlength']) { First Name can't exceed 20 characters }
            </div>
            }
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-6 col-md-6">
        <div class="mb-2">
          <label for="lastName" class="form-label text-primary"
            >Last Name <span class="text-danger">*</span></label
          >
          <div class="input-group">
            <input
              type="text"
              class="form-control"
              id="lastName"
              required
              formControlName="lastName"
              [ngClass]="{
                'is-invalid': (f.lastName.touched || submitted) && f.lastName.invalid
              }"
            />
            @if ((f.lastName.touched || submitted) && f.lastName.errors) {
            <div class="invalid-feedback d-block">
              @if (f.lastName.errors['required']) { Last Name is required } @else if
              (f.lastName.errors['minlength']) { Last Name must be at least 2 characters } @else if
              if if (f.lastName.errors['maxlength']) { Last Name can't exceed 20 characters }
            </div>
            }
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12 col-lg-12 col-md-12">
        <div class="mb-2">
          <label for="emailAddress" class="form-label text-primary"
            >Email ID <span class="text-danger">*</span></label
          >
          <div class="input-group">
            <input
              type="email"
              class="form-control"
              id="emailAddress"
              required
              formControlName="email"
              [ngClass]="{ 'is-invalid': (f.email.touched || submitted) && f.email.invalid }"
            />
            @if ((f.email.touched || submitted) && f.email.errors) {
            <div class="invalid-feedback d-block">
              @if (f.email.errors['required']) { Email Name is required } @else if
              (f.email.errors['email']) { Invalid email format }
            </div>
            }
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12 col-lg-6 col-md-6">
        <div class="mb-2">
          <label for="password" class="form-label text-primary"
            >Password <span class="text-danger">*</span></label
          >
          <div class="input-group">
            <input
              type="password"
              class="form-control"
              id="password"
              formControlName="password"
              [ngClass]="{
                'is-invalid': (f.password.touched || submitted) && f.password.invalid
              }"
            />
            @if ((f.password.touched || submitted) && f.password.errors) {
            <div class="invalid-feedback d-block">
              @if (f.password.errors['required']) { Password is required } @else if
              (f.password.errors['pattern']) { Password must include 1 uppercase, 1 number, 1
              special char and minium 8 chars }
            </div>
            }
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-6 col-md-6">
        <div class="mb-2">
          <label for="confirmPassword" class="form-label text-primary"
            >Confirm Password <span class="text-danger">*</span></label
          >
          <div class="input-group">
            <input
              type="password"
              class="form-control"
              id="confirmPassword"
              required
              formControlName="confirmPassword"
              [ngClass]="{
                'is-invalid': (f.confirmPassword.touched || submitted) && f.confirmPassword.invalid
              }"
            />
            @if ((f.confirmPassword.touched || submitted) && f.confirmPassword.errors) {
            <div class="invalid-feedback d-block">
              @if (f.confirmPassword.errors['required']) { Confirm Password is required } @else if
              (f.confirmPassword.errors['pattern']) { Password must include 1 uppercase, 1 number, 1
              special char and minium 8 chars } @else if (f.confirmPassword.errors['mustMatch']) {
              Passwords do not match }
            </div>
            }
          </div>
        </div>
      </div>
    </div>

    <!-- <button type="submit" class="btn btn-primary w-100 mb-2">Create User</button> -->
  </form>
</app-modal>
